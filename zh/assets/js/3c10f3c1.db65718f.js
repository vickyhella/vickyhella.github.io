"use strict";(self.webpackChunkvickyhella_github_io=self.webpackChunkvickyhella_github_io||[]).push([[7192],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return h}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=r.createContext({}),s=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=s(e.components);return r.createElement(c.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=s(n),m=a,h=p["".concat(c,".").concat(m)]||p[m]||d[m]||i;return n?r.createElement(h,o(o({ref:t},u),{},{components:n})):r.createElement(h,o({ref:t},u))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=m;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l[p]="string"==typeof e?e:a,o[1]=l;for(var s=2;s<i;s++)o[s]=n[s];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},3792:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return o},default:function(){return d},frontMatter:function(){return i},metadata:function(){return l},toc:function(){return s}});var r=n(3117),a=(n(7294),n(3905));const i={title:"Algolia Search",sidebar_position:3},o=void 0,l={unversionedId:"website-management/doc-search",id:"website-management/doc-search",title:"Algolia Search",description:"Uploading Search Records",source:"@site/docs/website-management/doc-search.md",sourceDirName:"website-management",slug:"/website-management/doc-search",permalink:"/zh/docs/website-management/doc-search",draft:!1,editUrl:"https://github.com/vickyhella/vickyhella.github.io/edit/main/docs/website-management/doc-search.md",tags:[],version:"current",lastUpdatedBy:"vickyhella",sidebarPosition:3,frontMatter:{title:"Algolia Search",sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Web Hosting",permalink:"/zh/docs/website-management/web-hosting"},next:{title:"Dealing with Broken Links",permalink:"/zh/docs/website-management/broken-links"}},c={},s=[{value:"Uploading Search Records",id:"uploading-search-records",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Preparing the Files Needed",id:"preparing-the-files-needed",level:3},{value:"Generating/Updating Records",id:"generatingupdating-records",level:3},{value:"References",id:"references",level:2}],u={toc:s},p="wrapper";function d(e){let{components:t,...n}=e;return(0,a.kt)(p,(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"uploading-search-records"},"Uploading Search Records"),(0,a.kt)("p",null,"This document describes how to generate and upload your search records to Algolia. You can follow the instructions here after updating the docs, or when you found that the search didn't return the results as needed."),(0,a.kt)("h3",{id:"prerequisites"},"Prerequisites"),(0,a.kt)("p",null,"You need to install:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Docker"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/stedolan/jq/wiki/Installation"},"jq"),": a lightweight command-line JSON processer. To quickly install it on Mac, run the command below:",(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"brew install jq\n")))),(0,a.kt)("h3",{id:"preparing-the-files-needed"},"Preparing the Files Needed"),(0,a.kt)("p",null,"You need to create a directory that contains the following two files:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},".env"),": Replace ",(0,a.kt)("inlineCode",{parentName:"li"},"YOUR_APP_ID")," and ",(0,a.kt)("inlineCode",{parentName:"li"},"YOUR_API_KEY")," with the actual ones:",(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre"},"APPLICATION_ID=YOUR_APP_ID\nAPI_KEY=YOUR_API_KEY\n"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"config.json"),": Replace ",(0,a.kt)("inlineCode",{parentName:"li"},"<index-name>")," and ",(0,a.kt)("inlineCode",{parentName:"li"},"<example-url>")," with the actual ones:",(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre"},'{\n"index_name": "<index-name>",\n"sitemap_urls": ["http://<example-url>/sitemap.xml"],\n"start_urls": ["http://<example-url>/"],\n"selectors": {\n    "lvl0": "",\n    "lvl1": "article h1",\n    "lvl2": "article h2",\n    "lvl3": "article h3",\n    "lvl4": "article h4",\n    "lvl5": "article h5"\n},\n"custom_settings": {\n    "attributesForFaceting": [\n    "language",\n    "version",\n    "type",\n    "docusaurus_tag"\n    ]\n}\n}\n')))),(0,a.kt)("h3",{id:"generatingupdating-records"},"Generating/Updating Records"),(0,a.kt)("p",null,"Go to the directory that contains the ",(0,a.kt)("inlineCode",{parentName:"p"},".env")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"config.json")," files and run the command below:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'docker run -it --env-file=.env -e "CONFIG=$(cat ./config.json | jq -r tostring)" algolia/docsearch-scraper\n')),(0,a.kt)("p",null,"After the command is run successfully, it will output the number of records generated as follows:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"> DocSearch: https://example-url-1/ 0 records)\n> DocSearch: https://example-url-2/ 1 records)\n> DocSearch: https://example-url-3/ 4 records)\n> DocSearch: https://example-url-4/ 4 records)\n\nNb hits: 9\n")),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"It might take several minutes for the records to be uploaded.")),(0,a.kt)("p",null,"You can now go back to the ",(0,a.kt)("a",{parentName:"p",href:"https://www.algolia.com/"},"Algolia console")," and see the updated records."),(0,a.kt)("h2",{id:"references"},"References"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://docsearch.algolia.com/docs/legacy/run-your-own/"},"Run Your Own"))))}d.isMDXComponent=!0}}]);