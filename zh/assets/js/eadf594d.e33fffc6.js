"use strict";(self.webpackChunkvickyhella_github_io=self.webpackChunkvickyhella_github_io||[]).push([[7931],{3905:function(t,e,a){a.d(e,{Zo:function(){return m},kt:function(){return c}});var n=a(7294);function l(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function r(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?r(Object(a),!0).forEach((function(e){l(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function s(t,e){if(null==t)return{};var a,n,l=function(t,e){if(null==t)return{};var a,n,l={},r=Object.keys(t);for(n=0;n<r.length;n++)a=r[n],e.indexOf(a)>=0||(l[a]=t[a]);return l}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(n=0;n<r.length;n++)a=r[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(l[a]=t[a])}return l}var o=n.createContext({}),p=function(t){var e=n.useContext(o),a=e;return t&&(a="function"==typeof t?t(e):i(i({},e),t)),a},m=function(t){var e=p(t.components);return n.createElement(o.Provider,{value:e},t.children)},u={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},d=n.forwardRef((function(t,e){var a=t.components,l=t.mdxType,r=t.originalType,o=t.parentName,m=s(t,["components","mdxType","originalType","parentName"]),d=p(a),c=l,k=d["".concat(o,".").concat(c)]||d[c]||u[c]||r;return a?n.createElement(k,i(i({ref:e},m),{},{components:a})):n.createElement(k,i({ref:e},m))}));function c(t,e){var a=arguments,l=e&&e.mdxType;if("string"==typeof t||l){var r=a.length,i=new Array(r);i[0]=d;var s={};for(var o in e)hasOwnProperty.call(e,o)&&(s[o]=e[o]);s.originalType=t,s.mdxType="string"==typeof t?t:l,i[1]=s;for(var p=2;p<r;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},9949:function(t,e,a){a.r(e),a.d(e,{assets:function(){return m},contentTitle:function(){return o},default:function(){return c},frontMatter:function(){return s},metadata:function(){return p},toc:function(){return u}});var n=a(7462),l=a(3366),r=(a(7294),a(3905)),i=["components"],s={title:"Multipass",sidebar_position:1},o=void 0,p={unversionedId:"tools/multipass",id:"tools/multipass",title:"Multipass",description:"Introduction",source:"@site/docs/tools/multipass.md",sourceDirName:"tools",slug:"/tools/multipass",permalink:"/zh/docs/tools/multipass",editUrl:"https://github.com/vickyhella/vickyhella.github.io/edit/main/docs/tools/multipass.md",tags:[],version:"current",lastUpdatedBy:"vickyhella",sidebarPosition:1,frontMatter:{title:"Multipass",sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Managing Packages",permalink:"/zh/docs/website-management/managing-packages"},next:{title:"Skims, LibreOffice, and Pandoc",permalink:"/zh/docs/tools/skims_libreoffice_pandoc"}},m={},u=[{value:"Introduction",id:"introduction",level:2},{value:"Multipass Commands",id:"multipass-commands",level:2},{value:"<code>multipass launch</code>",id:"multipass-launch",level:3},{value:"<code>multipass list</code>",id:"multipass-list",level:3},{value:"<code>multipass shell</code>",id:"multipass-shell",level:3},{value:"<code>multipass restart</code>",id:"multipass-restart",level:3},{value:"<code>multipass stop</code>",id:"multipass-stop",level:3},{value:"<code>multipass delete</code>",id:"multipass-delete",level:3},{value:"<code>multipass info</code>",id:"multipass-info",level:3},{value:"Using Proxy in Multipass VMs",id:"using-proxy-in-multipass-vms",level:2},{value:"Available Commands",id:"available-commands",level:2}],d={toc:u};function c(t){var e=t.components,a=(0,l.Z)(t,i);return(0,r.kt)("wrapper",(0,n.Z)({},d,a,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"Multipass is an open-source ",(0,r.kt)("strong",{parentName:"p"},"command-line tool")," that allows developers to quickly and easily create and manage VMs. Multipass provides a lightweight, easy-to-use alternative to traditional virtualization solutions such as VirtualBox and VMWare."),(0,r.kt)("p",null,"This document introduces some basic Multipass commands and their usage. For more information, see ",(0,r.kt)("a",{parentName:"p",href:"https://multipass.run/docs"},"Multipass documentation"),"."),(0,r.kt)("h2",{id:"multipass-commands"},"Multipass Commands"),(0,r.kt)("h3",{id:"multipass-launch"},(0,r.kt)("inlineCode",{parentName:"h3"},"multipass launch")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"multipass launch")," is used to create a new VM instance:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"multipass launch --name vm1\n")),(0,r.kt)("p",null,"This command creates a new VM instance with the name ",(0,r.kt)("inlineCode",{parentName:"p"},"vm1"),"."),(0,r.kt)("p",null,"If you need to create your VM from a specified image, run ",(0,r.kt)("inlineCode",{parentName:"p"},"multipass find")," for a list of available images, and append the image name to the command above (e.g., ",(0,r.kt)("inlineCode",{parentName:"p"},"multipass launch --name vm1 kinetic")," for using the Ubuntu 22.10 image)."),(0,r.kt)("h3",{id:"multipass-list"},(0,r.kt)("inlineCode",{parentName:"h3"},"multipass list")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"multipass list")," is used to list all the available VMs:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"multipass list\n")),(0,r.kt)("p",null,"This command displays a list of all available VMs along with their name, IP address, and status."),(0,r.kt)("h3",{id:"multipass-shell"},(0,r.kt)("inlineCode",{parentName:"h3"},"multipass shell")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"multipass shell")," is used to open a shell in the VM instance:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"multipass shell vm1\n")),(0,r.kt)("p",null,"This command opens a shell in the VM instance named ",(0,r.kt)("inlineCode",{parentName:"p"},"vm1"),"."),(0,r.kt)("h3",{id:"multipass-restart"},(0,r.kt)("inlineCode",{parentName:"h3"},"multipass restart")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"multipass restart")," is used to restart a VM instance:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"multipass restart vm1\n")),(0,r.kt)("p",null,"This command restarts a VM instance named ",(0,r.kt)("inlineCode",{parentName:"p"},"vm1"),"."),(0,r.kt)("h3",{id:"multipass-stop"},(0,r.kt)("inlineCode",{parentName:"h3"},"multipass stop")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"multipass stop")," is used to stop a running VM instance:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"multipass stop vm1\n")),(0,r.kt)("p",null,"This command stops the VM instance named ",(0,r.kt)("inlineCode",{parentName:"p"},"vm1"),"."),(0,r.kt)("h3",{id:"multipass-delete"},(0,r.kt)("inlineCode",{parentName:"h3"},"multipass delete")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"multipass delete")," is used to delete a VM instance:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"multipass delete vm1\n")),(0,r.kt)("p",null,"This command deletes the VM instance named ",(0,r.kt)("inlineCode",{parentName:"p"},"vm1"),"."),(0,r.kt)("p",null,"To permanently delete a VM instance, run:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"multipass purge vm1\n")),(0,r.kt)("h3",{id:"multipass-info"},(0,r.kt)("inlineCode",{parentName:"h3"},"multipass info")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"multipass info")," is used to display information about the Multipass installation:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"multipass info\n")),(0,r.kt)("p",null,"This command displays information about the installed version of Multipass, the location of the image cache, and other details."),(0,r.kt)("h2",{id:"using-proxy-in-multipass-vms"},"Using Proxy in Multipass VMs"),(0,r.kt)("p",null,"Assuming you use Clash and have your own VPN subscription, you should see a terminal command in clash similar to mine: ",(0,r.kt)("inlineCode",{parentName:"p"},"export https_proxy=http://127.0.0.1:7890 http_proxy=http://127.0.0.1:7890 all_proxy=socks5://127.0.0.1:7890"),"."),(0,r.kt)("p",null,"To modify the ",(0,r.kt)("inlineCode",{parentName:"p"},"export")," command so that you VMs in Multipass can use your host proxy, follow these steps:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Open a terminal window on your Mac.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Determine the IP address of your Mac. You can use the ",(0,r.kt)("inlineCode",{parentName:"p"},"ifconfig")," command to check this:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"ifconfig | grep \"inet \" | grep -v 127.0.0.1 | awk '{print $2}'\n")),(0,r.kt)("p",{parentName:"li"},"This command will output the IP address of your Mac, which you will need to modify the proxy command for use in Multipass.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Modify the proxy command to use the IP address of your Mac instead of ",(0,r.kt)("inlineCode",{parentName:"p"},"127.0.0.1"),". For example, if your Mac's IP address is ",(0,r.kt)("inlineCode",{parentName:"p"},"192.168.0.2"),", the modified command would look like:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"export https_proxy=http://192.168.0.2:7890 http_proxy=http://192.168.0.2:7890 all_proxy=socks5://192.168.0.2:7890\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Launch your Multipass VM using the command line or the Multipass app.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Open a terminal window in your VM.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Test the connectivity to your host machine by pinging the IP address of your Mac. For example, if your Mac's IP address is ",(0,r.kt)("inlineCode",{parentName:"p"},"192.168.0.2"),", you can run the following command:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"ping 192.168.0.2\n")),(0,r.kt)("p",{parentName:"li"},"If the ping is successful, you should see responses from the Mac.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Set the ",(0,r.kt)("inlineCode",{parentName:"p"},"http_proxy")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"https_proxy")," environment variables in your VM to point to the IP address of your Mac and the port number of your proxy server. For example, if your Mac's IP address is ",(0,r.kt)("inlineCode",{parentName:"p"},"192.168.0.2")," and your proxy server is listening on port ",(0,r.kt)("inlineCode",{parentName:"p"},"7890"),", you can set the environment variables using the following commands:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"export http_proxy=http://192.168.0.2:7890\nexport https_proxy=http://192.168.0.2:7890\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"If you want to use SOCKS5 proxy, set the ",(0,r.kt)("inlineCode",{parentName:"p"},"all_proxy")," environment variable in your VM to point to the IP address of your Mac and the port number of your SOCKS5 proxy server. For example:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"export all_proxy=socks5://192.168.0.2:7890\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Test the connectivity to the internet by running a command like curl to access a website. For example, you can run the following command to access the Google website:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"curl https://google.com\n")),(0,r.kt)("p",{parentName:"li"},"If the command is successful, you should see the HTML code of the Google website."))),(0,r.kt)("p",null,"That's it! You should now be able to use the modified export command in your Multipass VM to use your host machine as a proxy."),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"To unset the environment variables ",(0,r.kt)("inlineCode",{parentName:"p"},"http_proxy"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"https_proxy"),", or ",(0,r.kt)("inlineCode",{parentName:"p"},"all_proxy"),", use ",(0,r.kt)("inlineCode",{parentName:"p"},"unset"),":"),(0,r.kt)("pre",{parentName:"div"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"unset http_proxy https_proxy all_proxy\n")))),(0,r.kt)("h2",{id:"available-commands"},"Available Commands"),(0,r.kt)("p",null,"The table below lists all available commands that multipass supports:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Command"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"alias"),(0,r.kt)("td",{parentName:"tr",align:null},"Create an alias")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"aliases"),(0,r.kt)("td",{parentName:"tr",align:null},"List available aliases")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"authenticate"),(0,r.kt)("td",{parentName:"tr",align:null},"Authenticate client")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"delete"),(0,r.kt)("td",{parentName:"tr",align:null},"Delete instances")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"exec"),(0,r.kt)("td",{parentName:"tr",align:null},"Run a command on an instance")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"find"),(0,r.kt)("td",{parentName:"tr",align:null},"Display available images to create instances from")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"get"),(0,r.kt)("td",{parentName:"tr",align:null},"Get a configuration setting")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"help"),(0,r.kt)("td",{parentName:"tr",align:null},"Display help about a command")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"info"),(0,r.kt)("td",{parentName:"tr",align:null},"Display information about instances")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"launch"),(0,r.kt)("td",{parentName:"tr",align:null},"Create and start an Ubuntu instance")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"list"),(0,r.kt)("td",{parentName:"tr",align:null},"List all available instances")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"mount"),(0,r.kt)("td",{parentName:"tr",align:null},"Mount a local directory in the instance")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"networks"),(0,r.kt)("td",{parentName:"tr",align:null},"List available network interfaces")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"purge"),(0,r.kt)("td",{parentName:"tr",align:null},"Purge all deleted instances permanently")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"recover"),(0,r.kt)("td",{parentName:"tr",align:null},"Recover deleted instances")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"restart"),(0,r.kt)("td",{parentName:"tr",align:null},"Restart instances")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"set"),(0,r.kt)("td",{parentName:"tr",align:null},"Set a configuration setting")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"shell"),(0,r.kt)("td",{parentName:"tr",align:null},"Open a shell on a running instance")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"start"),(0,r.kt)("td",{parentName:"tr",align:null},"Start instances")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"stop"),(0,r.kt)("td",{parentName:"tr",align:null},"Stop running instances")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"suspend"),(0,r.kt)("td",{parentName:"tr",align:null},"Suspend running instances")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"transfer"),(0,r.kt)("td",{parentName:"tr",align:null},"Transfer files between the host and instances")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"umount"),(0,r.kt)("td",{parentName:"tr",align:null},"Unmount a directory from an instance")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"unalias"),(0,r.kt)("td",{parentName:"tr",align:null},"Remove aliases")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"version"),(0,r.kt)("td",{parentName:"tr",align:null},"Show version details")))))}c.isMDXComponent=!0}}]);